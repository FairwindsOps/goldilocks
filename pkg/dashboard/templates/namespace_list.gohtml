<!DOCTYPE html>
<html lang="en-US">
<head>
  {{ template "head" . }}

  <script>
    window.data = {{ .JSON }};
  </script>
  
  <script defer src="static/js/search.js"></script>
</head>

<body class="layoutSidebar">
  <header class="layoutSidebar__sidebar">
    {{ template "navbar" "--stack" }}

    {{ if gt (len .Data) 0 }}
    <section class="flow stack stack--center">
      <p class="badge badge--1">{{len .Data}} namespaces found</p>

      {{ if gt (len .Data) 10 }}
      <form class="stack__item--fullWidth" id="js-search-form" role="search">
        <label class="visually-hidden" for="namespace-search">Search namespaces</label>

        <input aria-controls="js-search-container" name="q" placeholder="search namespaces..." type="search" />

        <button type="submit">
          <i aria-hidden="true" class="fas fa-search"></i>
          <span class="visually-hidden">Search</span>
        </button>
      </form>
      {{ end }}

      <p><a href="/dashboard">
        <i aria-hidden="true" class="fas fa-stream"></i>
        View All
      </a></p>

    </section>
    {{ end }}
  </header>

  <main class="layoutSidebar__main">
    <h1 class="namespaceList__heading">Namespaces</h1>

    {{ if lt (len .Data) 1 }}
    <article>
      No namespaces are labelled for use by Goldilocks. Try labelling one with <code>kubectl label ns NAMESPACE_NAME goldilocks.fairwinds.com/enabled=true</code>
    </article>

    {{ else }}
    <ul aria-live="off" class="namespaceList__list" id="js-search-container">
      {{ range .Data }}
      <li data-search="{{ .Name }}">
        <a class="button button--1 buttonIcon" href="/dashboard/{{ .Name }}">
          {{ .Name }}
          <i aria-hidden="true" class="fas fa-chevron-right"></i>
        </a>
      </li>
      {{ end }}
    </ul>

    {{end}}
  </main>

  <footer class="layoutSidebar__footer">
    {{ template "footer" . }}
  </footer>
</body>
</html>
