<!doctype html>
<html>

<head>
  <script>
    window.data = {{ .JSON }};
  </script>

  {{ template "head" . }}
  
  <script type="text/javascript" src="static/js/namespace_list.js"></script>
</head>

<body class="layoutSidebar">
  <header class="layoutSidebar__sidebar">
    {{ template "navbar" . }}

    {{ if gt (len .Data) 0 }}
    <section class="flow stack stack--center">
      <p class="badge--primary">{{len .Data}} namespaces found</p>

      {{ if gt (len .Data) 10 }}
      <form class="stack__item--fullWidth" role="search">
        <label class="visually-hidden" for="namespace-search">Search namespaces</label>

        <input id="namespace-search" name="q" placeholder="Search namespaces..." type="search" />

        <button type="submit">
          <i aria-hidden="true" class="fas fa-search"></i>
          <span class="visually-hidden">Search</span>
        </button>
      </form>
      {{ end }}

      <p><a href="/dashboard">
        <i aria-hidden="true" class="fas fa-stream"></i>
        View All
      </a></p>

    </section>
    {{ end }}
  </header>

  <main class="layoutSidebar__main">
    <h1 class="namespaceList__heading">Namespaces</h1>

    {{ if lt (len .Data) 1 }}
    <article>
      No namespaces are labelled for use by Goldilocks. Try labelling one with <code>kubectl label ns NAMESPACE_NAME goldilocks.fairwinds.com/enabled=true</code>
    </article>

    {{ else }}
    <ul class="namespaceList__list">
      {{ range .Data }}
      <li>
        <a class="button--primary buttonIcon" href="/dashboard/{{ .Name }}">
          {{ .Name }}
          <i aria-hidden="true" class="fas fa-chevron-right"></i>
        </a>
      </li>
      {{ end }}
    </ul>

    {{end}}
  </main>

  <footer class="layoutSidebar__footer">
    {{ template "footer" . }}
  </footer>
</body>
</html>
